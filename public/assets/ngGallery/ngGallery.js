!function(){"use-strict";function e(e,n,i,a){function l(e,n){e.baseClass=e.class||t.baseClass,e.thumbClass=e.thumbClass||t.thumbClass,e.thumbsNum=e.thumbsNum||3}var t={baseClass:"ng-gallery",thumbClass:"ng-thumb",templateUrl:"ng-gallery.html"},s={enter:13,esc:27,left:37,right:39},o=t.templateUrl;return a.put(o,'<div class="{{ baseClass }}">  <div ng-repeat="i in images">    <img ng-src="{{ i.thumb }}" class="{{ thumbClass }}" ng-click="openGallery($index)" alt="Image {{ $index + 1 }}" />  </div></div><div class="ng-overlay" ng-show="opened"></div><div class="ng-gallery-content" unselectable="on" ng-show="opened" ng-swipe-left="nextImage()" ng-swipe-right="prevImage()">  <div class="uil-ring-css" ng-show="loading"><div></div></div><a href="{{getImageDownloadSrc()}}" target="_blank" ng-show="showImageDownloadButton()" class="download-image"><i class="fa fa-download"></i></a>  <a class="close-popup" ng-click="closeGallery()"><i class="fa fa-close"></i></a>  <a class="nav-left" ng-click="prevImage()"><i class="fa fa-angle-left"></i></a>  <img ondragstart="return false;" draggable="false" ng-src="{{ img }}" ng-click="nextImage()" ng-show="!loading" class="effect" />  <a class="nav-right" ng-click="nextImage()"><i class="fa fa-angle-right"></i></a>  <span class="info-text">{{ index + 1 }}/{{ images.length }} - {{ description }}</span>  <div class="ng-thumbnails-wrapper">    <div class="ng-thumbnails slide-left">      <div ng-repeat="i in images">        <img ng-src="{{ i.thumb }}" ng-class="{\'active\': index === $index}" ng-click="changeImage($index)" />      </div>    </div>  </div></div>'),{restrict:"EA",scope:{images:"=",thumbsNum:"@",hideOverflow:"="},controller:["$scope",function(e){e.$on("openGallery",function(n,i){e.openGallery(i.index)})}],templateUrl:function(e,n){return n.templateUrl||t.templateUrl},link:function(a,t,o){l(a,o),a.thumbsNum>=11&&(a.thumbsNum=11);var r=e.find("body"),d=angular.element(t[0].querySelectorAll(".ng-thumbnails-wrapper")),c=angular.element(t[0].querySelectorAll(".ng-thumbnails"));a.index=0,a.opened=!1,a.thumb_wrapper_width=0,a.thumbs_width=0;var g=function(e){var n=i.defer(),l=new Image;return l.onload=function(){a.loading=!1,!1!==typeof this.complete&&0!==this.naturalWidth||n.reject(),n.resolve(l)},l.onerror=function(){n.reject()},l.src=a.images[e].img,a.loading=!0,n.promise},u=function(e){g(a.index).then(function(e){a.img=e.src,h(a.index)}),a.description=a.images[e].description||""};a.showImageDownloadButton=function(){if(null!=a.images[a.index]&&null!=a.images[a.index].downloadSrc){var e=a.images[a.index];return angular.isDefined(e.downloadSrc)&&0<e.downloadSrc.length}},a.getImageDownloadSrc=function(){if(null!=a.images[a.index]&&null!=a.images[a.index].downloadSrc)return a.images[a.index].downloadSrc},a.changeImage=function(e){a.index=e,u(e)},a.nextImage=function(){a.index+=1,a.index===a.images.length&&(a.index=0),u(a.index)},a.prevImage=function(){a.index-=1,a.index<0&&(a.index=a.images.length-1),u(a.index)},a.openGallery=function(e){void 0!==typeof e&&(a.index=e,u(a.index)),a.opened=!0,a.hideOverflow&&$("body").css({overflow:"hidden"}),n(function(){var e=m();a.thumbs_width=e.width;var n=e.width+1;c.css({width:n+"px"}),d.css({width:e.visible_width+"px"}),h(a.index)})},a.closeGallery=function(){a.opened=!1,a.hideOverflow&&$("body").css({overflow:""})},r.bind("keydown",function(e){if(a.opened){var n=e.which;n===s.esc?a.closeGallery():n===s.right||n===s.enter?a.nextImage():n===s.left&&a.prevImage(),a.$apply()}});var m=function(){var e=0,n=0;return angular.forEach(c.find("img"),function(i){e+=i.clientWidth,e+=10,n=i.clientWidth+10}),{width:e,visible_width:n*a.thumbsNum}},h=function(e){n(function(){var n=a.images.length,i=a.thumbs_width,l=parseInt(i/n,10),t=e+1,s=Math.ceil(n/t);d[0].scrollLeft=0,d[0].scrollLeft=t*l-s*l},100)}}}}angular.module("jkuri.gallery",[]).directive("ngGallery",e),e.$inject=["$document","$timeout","$q","$templateCache"]}();